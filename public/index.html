<html>
	<head>
		<script
			defer
			data-domain="ballpoint.littlebonsai.co.uk"
			src="https://plausible.io/js/script.js"
		></script>
		<script src="https://cdn.tailwindcss.com"></script>
	</head>
	<body>
		<h1 class="px-8 py-2 text-2xl">Ballpoint</h1>
		<div>
			An
			<a href="https://www.inklestudios.com/ink/">ink</a> auto-formatter
		</div>

		<button
			class="border border-gray-700 rounded shadow hover:shadow-xl transition-all px-4 py-2 m-2"
			id="submit"
		>
			Format
		</button>
		<div class="flex">
			<div class="p-2 flex-col items-stretch">
				<h2 class="text-lg text-center">Input</h2>
				<textarea
					id="input"
					rows="40"
					cols="80"
					class="border border-gray-700 rounded shadow font-mono"
				>

			INCLUDE ./another.ink
			INCLUDE ./even/more.ink

VAR isFormatted = false
CONST          ballpointIsHelpful            =        true
LIST badEnoughDudes           = (you),      us

=== Knot ===
* some
*** choices
- here -> Knot.Stitch









= Stitch
hello {DEBUG:developer|public}!
~ isFormatted=true

 === function alter(ref x, y)
 	~ x = x + y
	~ return x

{Answer:
	- 0 : nothing
				- 42 : deep thought
- else : I don't know
	}

		</textarea
				>
			</div>
			<div class="p-2 flex-col items-stretch">
				<h2 class="text-lg text-center">Output</h2>
				<textarea
					id="output"
					rows="40"
					cols="80"
					class="border border-gray-700 rounded shadow font-mono"
				></textarea>
			</div>
		</div>

		<script>
			document.querySelector("#submit").addEventListener("click", () => {
				const input = document.querySelector("#input").value;

				fetch("/api/format.js", { method: "POST", body: input })
					.then((response) => {
						if (response.ok) {
							return response.json();
						}
					})
					.then(({ out }) => {
						document.querySelector("#output").value = out;
					});
			});
		</script>
	</body>
</html>
